<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Llyr&#39;s Blog</title>
  
  
  <link href="https://blog.prashantgiri360.com.np/atom.xml" rel="self"/>
  
  <link href="https://blog.prashantgiri360.com.np/"/>
  <updated>2025-04-02T11:04:11.330Z</updated>
  <id>https://blog.prashantgiri360.com.np/</id>
  
  <author>
    <name>Llyr4472</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Setting up SIEM Lab Using Wazuh</title>
    <link href="https://blog.prashantgiri360.com.np/Setting%20up%20SIEM%20Lab%20Using%20Wazuh/"/>
    <id>https://blog.prashantgiri360.com.np/Setting%20up%20SIEM%20Lab%20Using%20Wazuh/</id>
    <published>2025-04-02T11:04:11.330Z</published>
    <updated>2025-04-02T11:04:11.330Z</updated>
    
    <content type="html"><![CDATA[<p>This blog serves as an tutorial on how to do basic installation of SIEM lab at home using Wazuh which also doubles as a XDR.</p><p>Wazuh is a free, open-source and lightweight Security Information and Event Management (SIEM) and Extended Detection and Response (XDR) software. It is simple to install and get started.</p><p>Requirements for SIEM:</p><ul><li>Storage: 70GB</li><li>Memory: 8 GB</li></ul><p>Agents:</p><ul><li>Windows 10 Home</li><li>Ubuntu 24.04.2 LTS Desktop</li></ul><p>Server:</p><ul><li>Ubuntu 24.04.2 LTS Server</li></ul><p>At the end of this tutorial our wazuh dashboard will look like:<br><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/a8490cd5eb6b668de7a10e918b6b2af4_MD5.jpeg"                                     ></p><h2 id="1-Installing-SIEM-Server"><a href="#1-Installing-SIEM-Server" class="headerlink" title="1. Installing SIEM Server"></a>1. Installing SIEM Server</h2><p>We will use <em>vmware workstation pro</em> for setting up all of our devices. For SIEM server, we will do a minimal installation of ubuntu server and install wazuh in it.</p><h3 id="Installing-Ubuntu-Server"><a href="#Installing-Ubuntu-Server" class="headerlink" title="Installing Ubuntu Server"></a>Installing Ubuntu Server</h3><p>Installation of ubuntu is pretty stratight-forward,</p><ol><li>Download iso from <a class="link"   href="https://ubuntu.com/download/server" >here<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> and VMWare workstation Pro from <a class="link"   href="https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Workstation%20Pro" >here<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>(or any other virtual machine platforms )</li><li>Install the VMWare Workstation Pro (skip if you already have one).</li><li>Create a vmware instance and add the downloaded iso. I used following provisioning:<ul><li>2 cores</li><li>2 GB Memory</li><li>30 GB Storage</li></ul></li><li>Start the vmware instance and install ubuntu with all default settings.</li><li>Reboot the instance after installation and login using the username and password set during the installation.</li></ol><h3 id="Installing-Configure-Wazuh"><a href="#Installing-Configure-Wazuh" class="headerlink" title="Installing &amp; Configure Wazuh"></a>Installing &amp; Configure Wazuh</h3><p>After installing ubuntu server, we will now install Wazuh. Wazuh is a lightweight and open-source SIEM Software.</p><p>Install Wazuh using following command.</p><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sO https://packages.wazuh.com/4.3/wazuh-install.sh &amp;&amp; sudo bash wazuh-install.sh -a -i</span><br></pre></td></tr></table></figure></div><p>After the installation, it will provide you with you <strong>username</strong> and <strong>password</strong>, note them down somewhere.</p><p>Now to access the dasboard, we will need our server’s ip. Use following command to get your ip address:</p><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr</span><br></pre></td></tr></table></figure></div><p>It will return following output:<br><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/d7a4ac2548795cf6d3ca947705189206_MD5.jpeg"                                     ></p><p>Here on 2: after inet, 192.168.220.130 was my ip address. Opening it in a browser, <strong>outside my vm</strong>:</p><p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/0defef6c4cb900fdee2e63218e7c6f17_MD5.jpeg"                                     ></p><p>We can access the dashboard now. Login using the credentials we got after wazuh installation.</p><h3 id="Configuring-static-ip"><a href="#Configuring-static-ip" class="headerlink" title="Configuring static ip"></a>Configuring static ip</h3><p>To prevent our wazuh server ip from changing whenever it is restarted, we need to set it as static ip. </p><ol><li>Open netplan config file:</li></ol><div class="code-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/netplan/50-cloud-init.yaml</span><br></pre></td></tr></table></figure></div><ol start="2"><li>Paste the following and save (Ctrl+X-&gt;Y)</li></ol><div class="code-container" data-rel="Text"><figure class="iseeu highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">network:</span><br><span class="line">  version: 2</span><br><span class="line">  renderer: networkd</span><br><span class="line">  ethernets:</span><br><span class="line">    enp0s3:</span><br><span class="line">      dhcp4: no</span><br><span class="line">      addresses:</span><br><span class="line">        - 192.168.1.10/24</span><br><span class="line">      routes:</span><br><span class="line">        - to: default</span><br><span class="line">          via: 192.168.1.1</span><br><span class="line">      nameservers:</span><br><span class="line">        addresses: [8.8.8.8, 8.8.4.4]</span><br></pre></td></tr></table></figure></div><p>Now our server’s ip has ben set to <code>192.168.1.10</code> so we will use this to open dashboard and while setting up agents.</p><h2 id="Setting-up-Workstations"><a href="#Setting-up-Workstations" class="headerlink" title="Setting up Workstations"></a>Setting up Workstations</h2><p>We will connect two workstaions (one ubuntu and one windows) to our SIEM. First we will need these workstations. We will use VMs for our lab so I will do fresh installation of both machines.</p><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><ol><li><p>Download windows 10 iso from <a class="link"   href="https://www.microsoft.com/en-us/software-download/windows10" >here<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> </p></li><li><p>Create a new VM instance, and install the downloaded Ubuntu iso using default settings. I used following provisions for my VM instance:</p><ul><li>2 CPU</li><li>4 GB RAM</li><li>25 GB Storage</li></ul></li><li><p>There are two methods to install the agent</p><p> a. Open the Wazuh web page in browser and click add agent. Enter the details and paste the given commands in your windows powershell.</p><p> b. Download Wazuh agent installer from <a class="link"   href="https://packages.wazuh.com/4.x/windows/wazuh-agent-4.11.2-1.msi" >here<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> and run it. Then open powershell as admin and run following command</p> <div class="code-container" data-rel="Powershell"><figure class="iseeu highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="string">&quot;C:\Program Files (x86)\ossec-agent&quot;</span></span><br><span class="line">notepad .\ossec.conf</span><br></pre></td></tr></table></figure></div><p> Now edit the config file and add server ip and enrollement details as shown below:</p></li></ol><p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/3cb814280bfda1e1c8c5ea3ca9374ef9_MD5.jpeg"                                     ></p><ol start="4"><li>Now the windows machine should be shown in wazuh dashboard.</li></ol><h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><ol><li><p>Download ubuntu iso from <a class="link"   href="https://ubuntu.com/download/desktop/thank-you?version=24.04.2&architecture=amd64&lts=true" >here<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>.</p></li><li><p>Create a new VM instance, and install the downloaded Ubuntu iso using default settings. I used following provisions for my VM instance:</p><ul><li>2 CPU</li><li>4 GB RAM</li><li>15 GB Storage</li></ul></li><li><p>Open the Wazuh web page in browser and click add agent. Enter the details and paste the given commands in your ubuntu terminal.</p></li><li><p>Now you should see the agent in wazuh dashboard.<br> <img                       lazyload                     src="/images/loading.svg"                     data-src="/images/e28c154ce1b4deffd0eed40436acb470_MD5.jpeg"                                     ></p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;This blog serves as an tutorial on how to do basic installation of SIEM lab at home using Wazuh which also doubles as a XDR.&lt;/p&gt;
&lt;p&gt;Wazuh</summary>
      
    
    
    
    <category term="SOC" scheme="https://blog.prashantgiri360.com.np/categories/SOC/"/>
    
    
    <category term="SIEM" scheme="https://blog.prashantgiri360.com.np/tags/SIEM/"/>
    
    <category term="tutorial" scheme="https://blog.prashantgiri360.com.np/tags/tutorial/"/>
    
  </entry>
  
</feed>
